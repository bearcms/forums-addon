/*
 * Forums addon for Bear CMS
 * https://github.com/bearcms/forums-addon
 * Copyright (c) Amplilabs Ltd.
 * Free to use under the MIT license.
 */
var bearCMS=bearCMS||{};
bearCMS.forumPostNewForm=function(){var c=function(a){if("undefined"!==typeof ivoPetkov.bearFrameworkAddons&&"undefined"!==typeof ivoPetkov.bearFrameworkAddons.users){var b=ivoPetkov.bearFrameworkAddons.users;if(!b.currentUser.exists())return b.showLogin(),a.preventDefault(),!0}return!1};return{onBeforeSubmitForm:function(a){c(a)},onSubmitFormDone:function(a){var b=a.target;a=a.result;"undefined"!==typeof a.success&&b.reset();"undefined"!==typeof a.redirectUrl&&(window.location=a.redirectUrl)},onFormRequestSent:function(a){a=
a.target;a.querySelector(".bearcms-new-forum-post-page-send-button").style.display="none";a.querySelector(".bearcms-new-forum-post-page-send-button-waiting").style.display="inline-block";a.querySelector(".bearcms-new-forum-post-page-text").setAttribute("readonly","readonly")},onFormResponseReceived:function(a){a=a.target;a.querySelector(".bearcms-new-forum-post-page-send-button").style.display="inline-block";a.querySelector(".bearcms-new-forum-post-page-send-button-waiting").style.display="none";
a.querySelector(".bearcms-new-forum-post-page-text").removeAttribute("readonly")},onFocusTextarea:function(a){c(a)&&a.target.blur()},onFocusTitle:function(a){c(a)&&a.target.blur()}}}();