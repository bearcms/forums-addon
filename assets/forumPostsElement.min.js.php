<?php

/*
 * Forums addon for Bear CMS
 * https://github.com/bearcms/forums-addon
 * Copyright (c) Amplilabs Ltd.
 * Free to use under the MIT license.
 */

return <<<'EOT'
var bearCMS=bearCMS||{};bearCMS.forumPostsElement=bearCMS.forumPostsElement||{loadMore:function(e,n){e.innerHTML+=" ...";var t=e.parentNode.parentNode;clientPackages.get("serverRequests").then((function(e){var o=[];o.serverData=n.serverData,e.send("-bearcms-forumposts-load-more",o).then((function(e){!function(e,n){clientPackages.get("html5DOMDocument").then((function(t){t.insert(e,[n,"outerHTML"])}))}(JSON.parse(e).html,t)}))}))},openNewPost:function(e){clientPackages.get("modalWindows").then((function(n){n.showLoading({closeOnEscKey:!1}).then((function(){clientPackages.get("users").then((function(t){t.currentUser.exists().then((function(o){n.hideLoading().then((function(){o?n.open("-bearcms-forums-new-post-form",e):t.openLogin()}))}))}))}))}))}};
EOT;
