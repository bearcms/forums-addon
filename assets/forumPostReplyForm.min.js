/*
 * Forums addon for Bear CMS
 * https://github.com/bearcms/forums-addon
 * Copyright (c) Amplilabs Ltd.
 * Free to use under the MIT license.
 */
var bearCMS=bearCMS||{};
bearCMS.forumPostReplyForm=function(){var c=function(a){if("undefined"!==typeof ivoPetkov.bearFrameworkAddons&&"undefined"!==typeof ivoPetkov.bearFrameworkAddons.users){var b=ivoPetkov.bearFrameworkAddons.users;if(!b.currentUser.exists())return b.showLogin(),a.preventDefault(),!0}return!1};return{onBeforeSubmitForm:function(a){if(!c(a)){var b=a.target.previousSibling.id;a.target.querySelector('input[type="hidden"]').value=JSON.stringify({listElementID:b})}},onSubmitFormDone:function(a){var b=a.target;
a=a.result;"undefined"!==typeof a.success&&b.reset();b=document.getElementById(a.listElementID);html5DOMDocument.insert(a.listContent);b.innerHTML=document.body.lastChild.innerHTML;document.body.lastChild.parentNode.removeChild(document.body.lastChild)},onFormRequestSent:function(a){a=a.target;a.querySelector(".bearcms-forum-post-page-send-button").style.display="none";a.querySelector(".bearcms-forum-post-page-send-button-waiting").style.removeProperty("display");a.querySelector(".bearcms-forum-post-page-text-input").setAttribute("readonly",
"readonly")},onFormResponseReceived:function(a){a=a.target;a.querySelector(".bearcms-forum-post-page-send-button").style.removeProperty("display");a.querySelector(".bearcms-forum-post-page-send-button-waiting").style.display="none";a.querySelector(".bearcms-forum-post-page-text-input").removeAttribute("readonly")},onFocusTextarea:function(a){c(a)&&a.target.blur();a=a.target.parentNode;"none"===a.querySelector(".bearcms-forum-post-page-send-button-waiting").style.display&&a.querySelector(".bearcms-forum-post-page-send-button").style.removeProperty("display")}}}();