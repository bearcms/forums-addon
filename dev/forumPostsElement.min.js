/*
 * Forums addon for Bear CMS
 * https://github.com/bearcms/forums-addon
 * Copyright (c) Amplilabs Ltd.
 * Free to use under the MIT license.
 */
var bearCMS=bearCMS||{};
bearCMS.forumPostsElement=bearCMS.forumPostsElement||function(){var e=function(a,b){clientShortcuts.get("-bearcms-forums-html5domdocument").then(function(c){c.insert(a,[b,"outerHTML"])})},f=function(a,b){clientShortcuts.get("serverRequests").then(function(c){c.send("-bearcms-forums-new-post-form",a).then(function(a){a=JSON.parse(a);"undefined"!==typeof a.html&&b.open(a.html)})})};return{loadMore:function(a,b){a.innerHTML+=" ...";var c=a.parentNode.parentNode;clientShortcuts.get("serverRequests").then(function(a){var d=[];
d.serverData=b.serverData;a.send("-bearcms-forumposts-load-more",d).then(function(a){a=JSON.parse(a);e(a.html,c)})})},openNewPost:function(a){clientShortcuts.get("lightbox").then(function(b){b.wait(function(b){clientShortcuts.get("users").then(function(c){c.currentUser.exists()?f(a,b):c.openLogin()})})})}}}();